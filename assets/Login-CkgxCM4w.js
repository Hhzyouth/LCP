import{b6 as P,al as R,am as z,an as Z,t as g,K as x,o as m,f as v,m as o,k as l,ao as $,ap as j,p as i,aJ as y,j as V,g as b,y as w,aq as H,a9 as L,as as q,au as D,av as G,aw as J}from"./index-BXCC11IL.js";import{E as K,a as O}from"./el-form-item-Q5sLgxw0.js";/* empty css                   */import{E as c}from"./index-e590A-XK.js";import"./castArray-BxmzwEdl.js";import"./_baseClone-ByGl8-Fj.js";import"./_Uint8Array-KkRCjyoh.js";const Q=r=>P({url:"/user/register",method:"post",data:r}),W=r=>P({url:"/user/login",method:"post",data:r}),X=r=>(D("data-v-86bd058a"),r=r(),G(),r),Y={class:"Header-Main-Container"},ee={class:"container"},ae=X(()=>i("span",{class:"logo-container"},[i("img",{src:J,id:"main-logo"})],-1)),se={class:"input-container"},te={class:"text"},oe={class:"goTo"},le={__name:"Login",setup(r){const k=z(),E=Z(),d=g(!1),h=g("登录"),p=g("注册"),F=()=>{d.value?Q({nickName:t.nickname,regMail:t.mail,passwd:t.pass}).then(function(a){a.data.code===500?c.error(a.data.message):(c.success("注册成功"),setTimeout(()=>{E.go(0)},3e3))}).catch(function(a){console.log(a),c.error("注册失败")}):W({regMail:t.mail,passwd:t.pass}).then(a=>{console.log(a),a.data.code==500?c.error(a.data.data):(k.setToken(a.data.message),k.setInformation(a.data.data),E.push("/"))}).catch(()=>{c.error("网络超时")})},f=g(),C=(a,e,s)=>{e?e.split(" ").join("").length!==e.length?s(new Error("昵称中不能有空白符")):s():s(new Error("昵称不能为空"))},I=(a,e,s)=>{e?/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e)?s():s(new Error("请检查邮箱格式")):s(new Error("邮箱不能为空"))},M=(a,e,s)=>{if(e==="")s(new Error("请输入密码"));else if(e.length<6||e.length>20)s(new Error("密码长度必须在6~20之间"));else{if(t.checkPass!==""){if(!f.value)return;f.value.validateField("checkPass")}s()}},B=(a,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==t.pass?s(new Error("两次输入的密码不一致")):s()},t=x({pass:"",checkPass:"",mail:"",nickname:""}),N=x({pass:[{validator:M,trigger:"blur"}],checkPass:[{validator:B,trigger:"blur"}],mail:[{validator:I,trigger:"blur"}],nickname:[{validator:C,trigger:"blur"}]}),S=a=>{a&&a.validate(e=>{e?(console.log("submit!"),F()):console.log("error submit!")})};return(a,e)=>{const s=H,u=L,_=K,T=O,U=q,A=$;return m(),v("div",Y,[o(A,null,{default:l(()=>[o(s,{class:"elheader"},{default:l(()=>[o(j,{page:""})]),_:1}),o(U,{class:"elmain"},{default:l(()=>[i("div",ee,[ae,i("div",se,[o(T,{ref_key:"ruleFormRef",ref:f,style:{"max-width":"600px"},model:t,"status-icon":"",rules:N,"label-width":"auto",class:"demo-ruleForm"},{default:l(()=>[o(y,{name:"slide-fade"},{default:l(()=>[d.value?(m(),V(_,{key:0,label:"昵称",prop:"nickname"},{default:l(()=>[o(u,{modelValue:t.nickname,"onUpdate:modelValue":e[0]||(e[0]=n=>t.nickname=n),modelModifiers:{trim:!0},style:{width:"300px",height:"40px"},placeholder:"昵称",clearable:""},null,8,["modelValue"])]),_:1})):b("",!0)]),_:1}),o(_,{label:"邮箱",prop:"mail"},{default:l(()=>[o(u,{modelValue:t.mail,"onUpdate:modelValue":e[1]||(e[1]=n=>t.mail=n),style:{width:"300px",height:"40px"},type:"email",placeholder:"邮箱",clearable:""},null,8,["modelValue"])]),_:1}),o(_,{label:"密码",prop:"pass"},{default:l(()=>[o(u,{modelValue:t.pass,"onUpdate:modelValue":e[2]||(e[2]=n=>t.pass=n),style:{width:"300px",height:"40px"},type:"password",placeholder:"密码","show-password":""},null,8,["modelValue"])]),_:1}),o(y,{name:"reslide-fade"},{default:l(()=>[d.value?(m(),V(_,{key:0,label:"验证",prop:"checkPass"},{default:l(()=>[o(u,{modelValue:t.checkPass,"onUpdate:modelValue":e[3]||(e[3]=n=>t.checkPass=n),style:{width:"300px",height:"40px"},type:"password",placeholder:"再次输入密码","show-password":""},null,8,["modelValue"])]),_:1})):b("",!0)]),_:1})]),_:1},8,["model","rules"])]),i("div",{class:"goButton",onClick:e[4]||(e[4]=n=>S(f.value))},[i("div",te,w(h.value),1)]),i("div",oe,[d.value?(m(),v("span",{key:0,onClick:e[5]||(e[5]=()=>{d.value=!1,h.value="登录",p.value="注册"}),class:"to"}," 去"+w(p.value),1)):(m(),v("span",{key:1,onClick:e[6]||(e[6]=()=>{d.value=!0,h.value="注册",p.value="登录"}),class:"to"}," 去"+w(p.value),1))])])]),_:1})]),_:1})])}}},pe=R(le,[["__scopeId","data-v-86bd058a"]]);export{pe as default};
