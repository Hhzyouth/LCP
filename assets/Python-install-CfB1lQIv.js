import{al as i,o as c,j as d,k as a,au as u,av as h,p as s,x as l,f as y,m as n}from"./index-BXCC11IL.js";import{a as f,E as g}from"./el-tab-pane-9eQCgsm8.js";import{E as m}from"./el-scrollbar-NpxurtvA.js";import"./strings-CBtOi6BX.js";import"./index-DW1qeJdV.js";const P={},v=e=>(u("data-v-0bfb8018"),e=e(),h(),e),w=v(()=>s("section",{id:"using-python-on-windows"},[s("span",{id:"using-on-windows"}),s("h1",null,[s("span",{class:"section-number"},"4. "),l("在Windows上使用 Python"),s("a",{class:"headerlink",href:"#using-python-on-windows",title:"Link to this heading"},"¶")]),s("p",null,"本文档旨在概述在 Microsoft Windows 上使用 Python 时应了解的特定于 Windows 的行为。"),s("p",null,[l("不同于大多数 Unix 系统和服务，Windows 未包括任何受系统支持的 Python 预安装版。 为了让 Python 可用，多年以来 CPython 团队为每个 "),s("a",{class:"reference external",href:"https://www.python.org/downloads/"},"发布版"),l(" 编译了 Windows 安装程序。 这些安装程序主要被用来安装用户级 Python 安装版，包含供单独用户使用的核心解释器和库。 安装程序也能够为单台机器上的所有用户进行安装，还提供了针对应用程序本地分发版的单独 ZIP 文件。")]),s("p",null,[l("如 "),s("span",{class:"target",id:"index-78"}),s("a",{class:"pep reference external",href:"https://peps.python.org/pep-0011/"},[s("strong",null,"PEP 11")]),l(" 所述，Python 发布版对某个 Windows 平台的支持仅限于被 Microsoft 视为处于延长支持周期内的版本。 这意味着 Python 3.12 支持 Windows 8.1 及其后的版本。 如果你需要 Windows 7 支持，请安装 Python 3.8。")]),s("p",null,"Windows提供了许多不同的安装程序，每个安装程序都有一定的优点和缺点。"),s("p",null,[s("a",{class:"reference internal",href:"#windows-full"},[s("span",{class:"std std-ref"},"完整安装程序")]),l(" 内含所有组件，对于使用Python 进行任何类型项目的开发人员而言，它是最佳选择。")]),s("p",null,[s("a",{class:"reference internal",href:"#windows-store"},[s("span",{class:"std std-ref"},"Microsoft Store包")]),l(" 是一个适用于运行脚本和包，并使用 IDLE 或其他开发环境的简易 Python 安装版。 它需要 Windows 10 或更新的系统，但可以安全地安装而不会破坏其他程序。 它还提供了许多便捷命令用来启动 Python 及其工具。")]),s("p",null,[s("a",{class:"reference internal",href:"#windows-nuget"},[s("span",{class:"std std-ref"},"nuget.org 安装包")]),l(" 是用于持续集成系统的轻量级安装。它可用于构建Python包或运行脚本，但不可更新且没有用户界面工具。")]),s("p",null,[s("a",{class:"reference internal",href:"#windows-embeddable"},[s("span",{class:"std std-ref"},"可嵌入的包")]),l(" 是Python的最小安装包，适合嵌入到更大的应用程序中。")]),s("section",{id:"the-full-installer"},[s("span",{id:"windows-full"}),s("h2",null,[s("span",{class:"section-number"},"4.1. "),l("完整安装程序"),s("a",{class:"headerlink",href:"#the-full-installer",title:"Link to this heading"},"¶")]),s("section",{id:"installation-steps"},[s("h3",null,[s("span",{class:"section-number"},"4.1.1. "),l("安装步骤"),s("a",{class:"headerlink",href:"#installation-steps",title:"Link to this heading"},"¶")]),s("p",null,[l("四个 Python 3.12 安装程序可供下载 - 32位和64位版本的各有两个。 "),s("em",null,"web installer"),l(" （网络安装包）是一个小的初始化工具，它将在安装过程中，根据需要自动下载所需的组件。 "),s("em",null,"offline installer"),l(" （离线安装包）内含默认安装所需的组件，可选择功能仍需要Internet连接下载。请参阅 "),s("a",{class:"reference internal",href:"#install-layout-option"},[s("span",{class:"std std-ref"},"免下载安装")]),l(" 以了解在安装过程中避免下载的其他方法。")]),s("p",null,"启动安装程序后，可以选择以下两个选项之一："),s("p",null,"如果选择“Install Now（立即安装）”："),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("您 "),s("em",null,"不"),l(" 需要成为管理员（除非需要对C运行库进行系统更新，或者为所有用户安装 "),s("a",{class:"reference internal",href:"#launcher"},[s("span",{class:"std std-ref"},"适用于Windows的Python启动器")]),l(" ）")])]),s("li",null,[s("p",null,"Python将安装到您的用户目录中")]),s("li",null,[s("p",null,[s("a",{class:"reference internal",href:"#launcher"},[s("span",{class:"std std-ref"},"适用于Windows的Python启动器")]),l(" 将根据第一页底部的选项安装")])]),s("li",null,[s("p",null,"将安装标准库，测试套件，启动器和pip")]),s("li",null,[s("p",null,[l("如果选择将安装目录将添加到 "),s("span",{class:"target",id:"index-79"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")])])]),s("li",null,[s("p",null,"快捷方式仅对当前用户可见")])]),s("p",null,"选择“自定义安装”将允许您选择：要安装的功能、安装位置、其他选项或安装后的操作。如果要安装调试符号或二进制文件，您需要使用此选项。"),s("p",null,"如要为全部用户安装，应选择“自定义安装”。在这种情况下:"),s("ul",{class:"simple"},[s("li",null,[s("p",null,"您可能需要提供管理凭据或批准")]),s("li",null,[s("p",null,"Python 将安装到Program Files目录中")]),s("li",null,[s("p",null,[s("a",{class:"reference internal",href:"#launcher"},[s("span",{class:"std std-ref"},"适用于Windows的Python启动器")]),l(" 将安装到Windows目录中")])]),s("li",null,[s("p",null,"安装期间可以选择可选功能")]),s("li",null,[s("p",null,"标准库可以预编译为字节码")]),s("li",null,[s("p",null,[l("如果选中，安装目录将添加到系统 "),s("span",{class:"target",id:"index-80"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")])])]),s("li",null,[s("p",null,"快捷方式所有用户可用")])])]),s("section",{id:"removing-the-max-path-limitation"},[s("span",{id:"max-path"}),s("h3",null,[s("span",{class:"section-number"},"4.1.2. "),l("删除 MAX_PATH 限制"),s("a",{class:"headerlink",href:"#removing-the-max-path-limitation",title:"Link to this heading"},"¶")]),s("p",null,"历史上Windows的路径长度限制为260个字符。这意味着长于此的路径将无法解决并导致错误。"),s("p",null,[l("在最新版本的 Windows 中，此限制可被扩展到大约 32,000 个字符。 但需要让管理员激活“启用 Win32 长路径”组策略，或在注册表键 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\FileSystem")]),l(" 中设置 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"LongPathsEnabled")]),l(" 为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"1")]),l("。")]),s("p",null,[l("这允许 "),s("a",{class:"reference internal",href:"../library/functions.html#open",title:"open"},[s("code",{class:"xref py py-func docutils literal notranslate"},[s("span",{class:"pre"},"open()")])]),l(" 函数，"),s("a",{class:"reference internal",href:"../library/os.html#module-os",title:"os: Miscellaneous operating system interfaces."},[s("code",{class:"xref py py-mod docutils literal notranslate"},[s("span",{class:"pre"},"os")])]),l(" 模块和大多数其他路径功能接受并返回长度超过 260 个字符的路径。")]),s("p",null,"更改上述选项后，无需进一步配置。"),s("div",{class:"versionchanged"},[s("p",null,[s("span",{class:"versionmodified changed"},"在 3.6 版本发生变更: "),l("Python中启用了对长路径的支持。")])])]),s("section",{id:"installing-without-ui"},[s("span",{id:"install-quiet-option"}),s("h3",null,[s("span",{class:"section-number"},"4.1.3. "),l("无UI 安装"),s("a",{class:"headerlink",href:"#installing-without-ui",title:"Link to this heading"},"¶")]),s("p",null,"安装程序UI中的所有选项也可以从命令行指定，允许脚本安装程序在许多机器上复制安装，而无需用户交互。还可以在不禁用UI的情况下设置这些选项，以更改一些默认值。"),s("p",null,[l("下列选项（通过附带 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/?")]),l(" 执行安装器来查看）可被传给安装器:")]),s("div",{class:"responsive-table__container"},[s("table",{class:"docutils align-default"},[s("thead",null,[s("tr",{class:"row-odd"},[s("th",{class:"head"},[s("p",null,"名称")]),s("th",{class:"head"},[s("p",null,"描述")])])]),s("tbody",null,[s("tr",{class:"row-even"},[s("td",null,[s("p",null,"/passive")]),s("td",null,[s("p",null,"显示进度而无需用户交互")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"/quiet")]),s("td",null,[s("p",null,"安装/卸载时不显示任何 UI")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"/simple")]),s("td",null,[s("p",null,"防止用户定制")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"/uninstall")]),s("td",null,[s("p",null,"移除 Python（无需确认）")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"/layout [directory]")]),s("td",null,[s("p",null,"预下载所有组件")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"/log [filename]")]),s("td",null,[s("p",null,"指定日志记录文件位置")])])])])]),s("p",null,[l("所有其他选项都传递为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"name=value")]),l(" ，其中值通常是 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"0")]),l(" 来禁用某个特性， "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"1")]),l(" 来启用某个特性或路径。可用选项的完整列表如下所示。")]),s("div",{class:"responsive-table__container"},[s("table",{class:"docutils align-default"},[s("thead",null,[s("tr",{class:"row-odd"},[s("th",{class:"head"},[s("p",null,"名称")]),s("th",{class:"head"},[s("p",null,"描述")]),s("th",{class:"head"},[s("p",null,"默认值")])])]),s("tbody",null,[s("tr",{class:"row-even"},[s("td",null,[s("p",null,"InstallAllUsers")]),s("td",null,[s("p",null,"为所有用户安装。")]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"TargetDir")]),s("td",null,[s("p",null,"安装目录")]),s("td",null,[s("p",null,"基于InstallAllUsers选择")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"DefaultAllUsersTargetDir")]),s("td",null,[s("p",null,"为所有用户安装时的默认安装路径")]),s("td",null,[s("p",null,[s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"%ProgramFiles%\\Python"),l(),s("span",{class:"pre"},"X.Y")]),l(" 或 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"%ProgramFiles(x86)%\\Python"),l(),s("span",{class:"pre"},"X.Y")])])])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"DefaultJustForMeTargetDir")]),s("td",null,[s("p",null,"仅为当前用户安装时的默认安装路径")]),s("td",null,[s("p",null,[s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"%LocalAppData%\\Programs\\Python\\PythonXY")]),l(" 或 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"%LocalAppData%\\Programs\\Python\\PythonXY-32")]),l(" 或 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"%LocalAppData%\\Programs\\Python\\PythonXY-64")])])])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"DefaultCustomTargetDir")]),s("td",null,[s("p",null,"UI中显示的默认自定义安装目录")]),s("td",null,[s("p",null,"（空）")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"AssociateFiles")]),s("td",null,[s("p",null,"如果还安装了启动器，则创建文件关联。")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"CompileAll")]),s("td",null,[s("p",null,[l("将所有 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".py")]),l(" 文件编译为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".pyc")]),l(" 。")])]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"PrependPath")]),s("td",null,[s("p",null,[l("将安装和脚本目录添加到 "),s("span",{class:"target",id:"index-81"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 并将 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".PY")]),l(" 添加到 "),s("span",{class:"target",id:"index-82"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATHEXT")])])]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"AppendPath")]),s("td",null,[s("p",null,[l("将安装和脚本目录添加到 "),s("span",{class:"target",id:"index-83"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 并将 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".PY")]),l(" 添加到 "),s("span",{class:"target",id:"index-84"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATHEXT")])])]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"Shortcuts")]),s("td",null,[s("p",null,"如果已安装，为解释器，文档和IDLE创建快捷方式")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"Include_doc")]),s("td",null,[s("p",null,"安装Python手册")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"Include_debug")]),s("td",null,[s("p",null,"安装调试二进制文件")]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"Include_dev")]),s("td",null,[s("p",null,"安装开发者头文件和库文件。 省略这一步可能导致安装不可用。")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"Include_exe")]),s("td",null,[s("p",null,[l("安装 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 以及相关文件。忽略此项可能会导致安装不可用。")])]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"Include_launcher")]),s("td",null,[s("p",null,[l("安装 "),s("a",{class:"reference internal",href:"#launcher"},[s("span",{class:"std std-ref"},"适用于Windows的Python启动器")]),l(" .")])]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"InstallLauncherAllUsers")]),s("td",null,[s("p",null,[l("为所有用户安装启动器。还需要 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"Include_launcher")]),l(" 被设定为1")])]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"Include_lib")]),s("td",null,[s("p",null,"安装标准库和扩展模块。 省略这一步可能导致安装不可用。")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"Include_pip")]),s("td",null,[s("p",null,"安装捆绑的pip和setuptools")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"Include_symbols")]),s("td",null,[s("p",null,[l("安装调试符号集 ("),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"*.pdb")]),l(")")])]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"Include_tcltk")]),s("td",null,[s("p",null,"安装Tcl/Tk 支持和IDLE")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"Include_test")]),s("td",null,[s("p",null,"安装标准库测试套件")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"Include_tools")]),s("td",null,[s("p",null,"安装实用程序脚本")]),s("td",null,[s("p",null,"1")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"LauncherOnly")]),s("td",null,[s("p",null,"仅安装启动器。这将覆盖大多数其他选项。")]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"SimpleInstall")]),s("td",null,[s("p",null,"禁用大多数安装UI")]),s("td",null,[s("p",null,"0")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"SimpleInstallDescription")]),s("td",null,[s("p",null,"使用简化安装UI时显示的自定义消息。")]),s("td",null,[s("p",null,"（空）")])])])])]),s("p",null,"例如，要以静默方式全局安装默认的Python，您可以（在命令提示符>）使用以下命令:"),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`python-3.9.0.exe /quiet InstallAllUsers=1 PrependPath=1 Include_test=0
        `)])])]),s("p",null,"要允许用户在没有测试套件的情况下轻松安装Python的个人副本，可以使用以下命令提供快捷方式。这将显示一个简化的初始页面，不允许自定义:"),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`python-3.9.0.exe InstallAllUsers=0 Include_launcher=0 Include_test=0
            SimpleInstall=1 SimpleInstallDescription="Just for me, no test suite."
        `)])])]),s("p",null,"（请注意，省略启动器也会省略文件关联，并且仅在全局安装包含启动器时才建议用于每用户安装。）"),s("p",null,[l("上面列出的选项也可以在一个名为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"unattend.xml")]),l(" 的文件中与可执行文件一起提供。此文件指定选项和值的列表。作为属性提供的值，（如果可能）它将转换为数字。作为文本提供的值，始终保留为字符串。此示例文件设置与上一示例采用相同的选项：")]),s("div",{class:"highlight-xml notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"nt"},"<Options>"),l(`
        `),s("span",{class:"w"},"    "),s("span",{class:"nt"},"<Option"),s("span",{class:"w"}," "),s("span",{class:"na"},"Name="),s("span",{class:"s"},'"InstallAllUsers"'),s("span",{class:"w"}," "),s("span",{class:"na"},"Value="),s("span",{class:"s"},'"no"'),s("span",{class:"w"}," "),s("span",{class:"nt"},"/>"),l(`
        `),s("span",{class:"w"},"    "),s("span",{class:"nt"},"<Option"),s("span",{class:"w"}," "),s("span",{class:"na"},"Name="),s("span",{class:"s"},'"Include_launcher"'),s("span",{class:"w"}," "),s("span",{class:"na"},"Value="),s("span",{class:"s"},'"0"'),s("span",{class:"w"}," "),s("span",{class:"nt"},"/>"),l(`
        `),s("span",{class:"w"},"    "),s("span",{class:"nt"},"<Option"),s("span",{class:"w"}," "),s("span",{class:"na"},"Name="),s("span",{class:"s"},'"Include_test"'),s("span",{class:"w"}," "),s("span",{class:"na"},"Value="),s("span",{class:"s"},'"no"'),s("span",{class:"w"}," "),s("span",{class:"nt"},"/>"),l(`
        `),s("span",{class:"w"},"    "),s("span",{class:"nt"},"<Option"),s("span",{class:"w"}," "),s("span",{class:"na"},"Name="),s("span",{class:"s"},'"SimpleInstall"'),s("span",{class:"w"}," "),s("span",{class:"na"},"Value="),s("span",{class:"s"},'"yes"'),s("span",{class:"w"}," "),s("span",{class:"nt"},"/>"),l(`
        `),s("span",{class:"w"},"    "),s("span",{class:"nt"},"<Option"),s("span",{class:"w"}," "),s("span",{class:"na"},"Name="),s("span",{class:"s"},'"SimpleInstallDescription"'),s("span",{class:"nt"},">"),l("Just"),s("span",{class:"w"}," "),l("for"),s("span",{class:"w"}," "),l("me,"),s("span",{class:"w"}," "),l("no"),s("span",{class:"w"}," "),l("test"),s("span",{class:"w"}," "),l("suite"),s("span",{class:"nt"},"</Option>"),l(`
        `),s("span",{class:"nt"},"</Options>"),l(`
        `)])])])]),s("section",{id:"installing-without-downloading"},[s("span",{id:"install-layout-option"}),s("h3",null,[s("span",{class:"section-number"},"4.1.4. "),l("免下载安装"),s("a",{class:"headerlink",href:"#installing-without-downloading",title:"Link to this heading"},"¶")]),s("p",null,"由于下载的初始安装包中未包含Python的某些可选功能，如果选择安装这些功能可能需要Internet连接。为了避免这种需要，可以按需下载所有可能的组件，以创建一个完整的布局，该布局将不再需要internet连接，而不管所选择的特性是什么。请注意，此下载可能比要求的要大，但是如果要执行大量安装，则拥有本地缓存​​的副本非常有用。"),s("p",null,[l("从命令提示符执行以下命令以下载所有可能的必需文件。 请记得要将 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python-3.9.0.exe")]),l(" 替换为安装程序的实际名称，并在单独的目录中创建子目录以避免同名文件间的冲突。")]),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`python-3.9.0.exe /layout [optional target directory]
        `)])])]),s("p",null,[l("您也可以指定 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/quiet")]),l(" 选项来隐藏进度显示。")])]),s("section",{id:"modifying-an-install"},[s("h3",null,[s("span",{class:"section-number"},"4.1.5. "),l("修改安装"),s("a",{class:"headerlink",href:"#modifying-an-install",title:"Link to this heading"},"¶")]),s("p",null,"安装Python后，您可以通过Windows中的“程序和功能”工具添加或删除功能。选择Python条目并选择“卸载/更改”以在维护模式下打开安装程序。"),s("p",null,"“修改” 允许您通过修改复选框来添加或删除功能 - 未更改的复选框将不会安装或删除任何内容。在此模式下无法更改某些选项，例如安装目录；要修改这些，您需要完全删除然后重新安装Python。"),s("p",null,"“修复” 将使用当前设置验证应安装的所有文件，并替换已删除或修改的任何文件"),s("p",null,[l("“卸载” 将完全删除Python，但 "),s("a",{class:"reference internal",href:"#launcher"},[s("span",{class:"std std-ref"},"适用于Windows的Python启动器")]),l(" 除外，它在“程序和功能”中有自己的条目。")])])]),s("section",{id:"the-microsoft-store-package"},[s("span",{id:"windows-store"}),s("h2",null,[s("span",{class:"section-number"},"4.2. "),l("Microsoft Store包"),s("a",{class:"headerlink",href:"#the-microsoft-store-package",title:"Link to this heading"},"¶")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.7.2.")])]),s("p",null,"Microsoft Store 包是一个易于安装的 Python 解释器，主要针对在交互模式下使用，例如用于教学。"),s("p",null,'要安装此软件包，请确保您拥有最新的Windows 10更新，并在Microsoft Store应用程序中搜索 "Python 3.12" 。确保您选择的应用程序由 Python Software Foundation 发布并安装。'),s("div",{class:"admonition warning"},[s("p",{class:"admonition-title"},"警告"),s("p",null,"Python将始终在Microsoft Store上免费提供。如果要求您付款，则表示您没有选择正确的包。")]),s("p",null,[l("安装完成后，可以在开始菜单中找到它来启动 Python。或者可以在命令提示符或 PowerShell 会话中输入 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 来启动。此外可以输入 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pip")]),l(" 或 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"idle")]),l(" 来使用 pip 和 IDLE。IDLE 也在开始菜单中。")]),s("p",null,[l("所有这三个命令也可以使用版本号后缀，例如， "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.exe")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.x.exe")]),l(" 以及 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" （其中 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"3.x")]),l(" 是您要启动的特定版本，例如 3.12 ）。在 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"设置-->主页-->应用和功能")]),l(" 页面中，点选 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"管理可选功能")]),l(" ，选择与每个命令关联的python版本。建议确保 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pip")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"idle")]),l(" 与选择的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 版本一致。")]),s("p",null,[l("可以使用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python"),l(),s("span",{class:"pre"},"-m"),l(),s("span",{class:"pre"},"venv")]),l(" 创建虚拟环境并激活并正常使用。")]),s("p",null,[l("如果你已经安装了另一个版本的Python并将它添加到你的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 变量中，那么它将作为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 而不是来自Microsoft Store的那个。要访问新安装，请使用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.exe")]),l(" 或 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.x.exe")]),l(" 。")]),s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"py.exe")]),l(" 启动器将检测此 Python 安装版，但会优先使用来自传统安装器的安装版。")]),s("p",null,"要删除Python，请打开“设置”并使用“应用程序和功能”，或者在“开始”中找到Python，然后右键单击以选择“卸载”。卸载将删除该已安装Python程序中的所有软件包，但不会删除任何虚拟环境"),s("section",{id:"known-issues"},[s("h3",null,[s("span",{class:"section-number"},"4.2.1. "),l("已知的问题"),s("a",{class:"headerlink",href:"#known-issues",title:"Link to this heading"},"¶")]),s("section",{id:"redirection-of-local-data-registry-and-temporary-paths"},[s("h4",null,[s("span",{class:"section-number"},"4.2.1.1. "),l("本地数据、注册表项和临时路径的重定向"),s("a",{class:"headerlink",href:"#redirection-of-local-data-registry-and-temporary-paths",title:"Link to this heading"},"¶")]),s("p",null,[l("由于 Microsoft Store 应用程序的限制，Python 脚本可能无法对共享位置如 "),s("span",{class:"target",id:"index-85"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"TEMP")]),l(" 和注册表进行完全写入访问。 相反同，它将写入到一个私有副本。 如果你的脚本必须修改共享位置，则需要安装完整的安装器。")]),s("p",null,[l("在运行时，Python 将使用知名 Windows 文件夹和注册表项的一个私有副本。 例如，如果环境变量 "),s("span",{class:"target",id:"index-86"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"%APPDATA%")]),l(" 为 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"c:\\Users\\<user>\\AppData\\")]),l("，则当写入 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"C:\\Users\\<user>\\AppData\\Local")]),l(" 时将会写入到 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"C:\\Users\\<user>\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\Local\\")]),l("。")]),s("p",null,[l("当读取文件时，Windows 将返回来自私有文件夹的文件，或者如果文件不存在，则返回来自知名 Windows 目录的文件。 例如读取 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"C:\\Windows\\System32")]),l(" 将返回 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"C:\\Windows\\System32")]),l(" 的内容加上 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"C:\\Program"),l(),s("span",{class:"pre"},"Files\\WindowsApps\\package_name\\VFS\\SystemX86")]),l(" 的内容。")]),s("p",null,[l("你可以使用 "),s("a",{class:"reference internal",href:"../library/os.path.html#os.path.realpath",title:"os.path.realpath"},[s("code",{class:"xref py py-func docutils literal notranslate"},[s("span",{class:"pre"},"os.path.realpath()")])]),l(" 找到任何现有文件的真实路径:")]),s("div",{class:"highlight-python notranslate"},[s("div",{class:"highlight",style:{position:"relative"}},[s("span",{class:"copybutton",title:"Hide the prompts and output","data-hidden":"false"},">>>"),s("pre",null,[s("span"),s("span",{class:"gp"},">>> "),s("span",{class:"kn"},"import"),l(),s("span",{class:"nn"},"os"),l(`
        `),s("span",{class:"gp"},">>> "),s("span",{class:"n"},"test_file"),l(),s("span",{class:"o"},"="),l(),s("span",{class:"s1"},"'C:"),s("span",{class:"se"},"\\\\"),s("span",{class:"s1"},"Users"),s("span",{class:"se"},"\\\\"),s("span",{class:"s1"},"example"),s("span",{class:"se"},"\\\\"),s("span",{class:"s1"},"AppData"),s("span",{class:"se"},"\\\\"),s("span",{class:"s1"},"Local"),s("span",{class:"se"},"\\\\"),s("span",{class:"s1"},"test.txt'"),l(`
        `),s("span",{class:"gp"},">>> "),s("span",{class:"n"},"os"),s("span",{class:"o"},"."),s("span",{class:"n"},"path"),s("span",{class:"o"},"."),s("span",{class:"n"},"realpath"),s("span",{class:"p"},"("),s("span",{class:"n"},"test_file"),s("span",{class:"p"},")"),l(`
        `),s("span",{class:"go"},"'C:\\\\Users\\\\example\\\\AppData\\\\Local\\\\Packages\\\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\\\LocalCache\\\\Local\\\\test.txt'"),l(`
        `)])])]),s("p",null,"当写入到 Windows 注册表时，会存在以下行为:"),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("从 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"HKLM\\\\Software")]),l(" 读取是被允许的并且其结果将与包中的 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"registry.dat")]),l(" 文件合并。")])]),s("li",null,[s("p",null,[l("当相应的键/值存在时向 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"HKLM\\\\Software")]),l(" 写入，即修改现有键的值是不被允许的。")])]),s("li",null,[s("p",null,[l("当包中相应的键/值不存在并且用户具有正确的访问权限时向 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"HKLM\\\\Software")]),l(" 写入是被允许的。")])])]),s("p",null,[l("有关此限制的技术原理的更多细节，请查询 Microsoft 已打包完全可信应用的文档，当前位于 "),s("a",{class:"reference external",href:"https://docs.microsoft.com/en-us/windows/msix/desktop/desktop-to-uwp-behind-the-scenes"},"docs.microsoft.com/en-us/windows/msix/desktop/desktop-to-uwp-behind-the-scenes")])])])]),s("section",{id:"the-nuget-org-packages"},[s("span",{id:"windows-nuget"}),s("h2",null,[s("span",{class:"section-number"},"4.3. "),l("nuget.org 安装包"),s("a",{class:"headerlink",href:"#the-nuget-org-packages",title:"Link to this heading"},"¶")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.5.2.")])]),s("p",null,"nuget.org 是一个精简的 Python 环境，用于在没有全局安装 Python 的系统的持续集成和构建。 虽然 nuget 是“.NET的包管理器”，但是对于包含构建时工具的包来说，它也可以很好地工作。"),s("p",null,[l("访问 "),s("a",{class:"reference external",href:"https://www.nuget.org/"},"nuget.org"),l(" 获取有关使用 nuget 的最新信息。 下面的摘要对 Python 开发人员来说已经足够了。")]),s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"nuget.exe")]),l(" 命令行工具可以直接从 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"https://aka.ms/nugetclidl")]),l(" 下载，例如，使用 curl 或 PowerShell。 使用该工具安装 64 位或 32 位最新版本的 Python:")]),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`nuget.exe install python -ExcludeVersion -OutputDirectory .
        nuget.exe install pythonx86 -ExcludeVersion -OutputDirectory .
        `)])])]),s("p",null,[l("要选择特定版本，请添加 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-Version"),l(),s("span",{class:"pre"},"3.x.y")]),l(" 。 输出目录可以从 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".")]),l(" 更改，包将安装到子目录中。 默认情况下，子目录的名称与包的名称相同，如果没有 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-ExcludeVersion")]),l(" 选项，则此名称将包含已安装的特定版本。 子目录里面是一个包含 Python 安装的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"tools")]),l(" 目录：")]),s("div",{class:"highlight-doscon notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"go"},"# Without -ExcludeVersion"),l(`
        `),s("span",{class:"gp"},">"),l(` .\\python.3.5.2\\tools\\python.exe -V
        `),s("span",{class:"go"},"Python 3.5.2"),l(`

        `),s("span",{class:"go"},"# With -ExcludeVersion"),l(`
        `),s("span",{class:"gp"},">"),l(` .\\python\\tools\\python.exe -V
        `),s("span",{class:"go"},"Python 3.5.2"),l(`
        `)])])]),s("p",null,"通常，nuget 包不可升级，应该平行安装较新版本并使用完整路径引用。 或者，手动删除程序包目录并再次安装。 如果在构建之间不保留文件，许多 CI 系统将自动执行此操作。"),s("p",null,[l("除了 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"tools")]),l(" 目录外，还有一个 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"build\\native")]),l(" 目录。 它包含一个 MSBuild 属性文件 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python.props")]),l("，可以在 C++ 项目中使用该文件来引用 Python 安装。 包含这些设置将自动在生成中使用标头和导入库。")]),s("p",null,[l("The package information pages on nuget.org are "),s("a",{class:"reference external",href:"https://www.nuget.org/packages/python"},"www.nuget.org/packages/python"),l(" for the 64-bit version and "),s("a",{class:"reference external",href:"https://www.nuget.org/packages/pythonx86"},"www.nuget.org/packages/pythonx86"),l(" for the 32-bit version.")])]),s("section",{id:"the-embeddable-package"},[s("span",{id:"windows-embeddable"}),s("h2",null,[s("span",{class:"section-number"},"4.4. "),l("可嵌入的包"),s("a",{class:"headerlink",href:"#the-embeddable-package",title:"Link to this heading"},"¶")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.5.")])]),s("p",null,"嵌入式发行版是一个包含最小 Python 环境的 ZIP 文件。 它旨在作为另一个应用程序的一部分，而不是由最终用户直接访问。"),s("p",null,[l("在解压缩后，嵌入的分发包（几乎）与用户的系统完全隔离，包括环境变量、系统注册表设置和已安装的软件包。 标准库作为预先编译和优化的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".pyc")]),l(" 文件被包括在一个 ZIP 文件中，并提供了 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.dll")]),l(", "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python37.dll")]),l(", "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pythonw.exe")]),l("。 其中将不包括 Tcl/tk（包括所有依赖它的包，如 Idle 等）、pip 和 Python 文档。")]),s("div",{class:"admonition note"},[s("p",{class:"admonition-title"},"备注"),s("p",null,[l("嵌入式发行版不包括 "),s("a",{class:"reference external",href:"https://docs.microsoft.com/en-US/cpp/windows/latest-supported-vc-redist#visual-studio-2015-2017-2019-and-2022"},"Microsoft C 运行时"),l("，应用程序安装程序负责提供此功能。 运行时可能已经预先安装在用户的系统上或通过 Windows Update 自动安装，并且可以通过在系统目录中找到 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"ucrtbase.dll")]),l(" 来检测。")])]),s("p",null,"第三方软件包应该由应用程序与嵌入式发行版一起安装。这个发行版不支持像常规 Python 安装那样使用 pip 来管理依赖关系，不过可以小心地将 pip 包含进来并使用它进行自动更新。 通常，第三方包应该作为应用程序的一部分(“打包”)处理，以便开发人员在向用户提供更新之前能够确保与新版本兼容。"),s("p",null,"下面描述了这个发行版的两个推荐用例。"),s("section",{id:"python-application"},[s("h3",null,[s("span",{class:"section-number"},"4.4.1. "),l("Python 应用程序"),s("a",{class:"headerlink",href:"#python-application",title:"Link to this heading"},"¶")]),s("p",null,"用 Python 编写的应用程序并不一定要求用户了解这一事实。 在这种情况下，可以使用嵌入式发行版在安装包中包含 Python 的私有版本。 根据它应该有多透明（或者相反，它应该看起来有多专业），有两个选项。"),s("p",null,[l("使用专门的可执行文件作为启动程序需要一些编码，但为用户提供了最透明的体验。使用定制的启动器，没有明显的迹象表明程序是在 Python 上运行的：图标可以定制，公司和版本信息可以指定，文件关联可以正常运行。在大多数情况下，自定义启动程序应该只需使用硬编码的命令行就能调用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"Py_Main")]),l("。")]),s("p",null,[l("更简单的方法是提供批处理文件或生成的快捷方式，使用所需的命令行参数直接调用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 或 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pythonw.exe")]),l("。在这种情况下，应用程序将显示为 Python 而不是其实际名称，并且用户可能无法将其与其他正在运行的 Python 进程或文件关联区分开来。")]),s("p",null,"对于后一种方法，包应该与 Python 可执行文件一起作为目录安装，以确保它们在路径上可用。 使用专用的启动器，包可以位于其他位置，因为在启动应用程序之前有机会指定搜索路径。")]),s("section",{id:"embedding-python"},[s("h3",null,[s("span",{class:"section-number"},"4.4.2. "),l("嵌入Python"),s("a",{class:"headerlink",href:"#embedding-python",title:"Link to this heading"},"¶")]),s("p",null,[l("用本地代码编写的应用程序通常需要某种形式的脚本语言，嵌入式Python发行版可以用于此目的。通常，应用程序的大部分都是本机代码，某些部分将调用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 或直接使用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.dll")]),l(" 。无论是哪种情况，将嵌入的发行版解压缩到应用程序安装的子目录中就足以提供可加载的Python解释器。")]),s("p",null,"与应用程序使用一样，包可以安装到任何位置，因为在初始化解释器之前有机会指定搜索路径。否则，使用嵌入式发行版和常规安装之间没有根本区别。")])]),s("section",{id:"alternative-bundles"},[s("h2",null,[s("span",{class:"section-number"},"4.5. "),l("替代捆绑包"),s("a",{class:"headerlink",href:"#alternative-bundles",title:"Link to this heading"},"¶")]),s("p",null,"除了标准的CPython发行版之外，还有一些包含附加功能的修改包。以下是热门版本及其主要功能的列表："),s("dl",null,[s("dt",null,[s("a",{class:"reference external",href:"https://www.activestate.com/products/python/"},"ActivePython")]),s("dd",null,[s("p",null,"具有多平台兼容性的安装程序，文档，PyWin32")]),s("dt",null,[s("a",{class:"reference external",href:"https://www.anaconda.com/download/"},"Anaconda")]),s("dd",null,[s("p",null,[l("流行的科学模块（如numpy，scipy和pandas）和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"conda")]),l(" 包管理器。")])]),s("dt",null,[s("a",{class:"reference external",href:"https://www.enthought.com/edm/"},"Enthought 部署管理器")]),s("dd",null,[s("p",null,"“下一代的 Python 环境和包管理器”"),s("p",null,[l("之前 Enthought 提供了 Canopy，但已经 "),s("a",{class:"reference external",href:"https://support.enthought.com/hc/en-us/articles/360038600051-Canopy-GUI-end-of-life-transition-to-the-Enthought-Deployment-Manager-EDM-and-Visual-Studio-Code"},"于 2016 年结束生命期"),l("。")])]),s("dt",null,[s("a",{class:"reference external",href:"https://winpython.github.io/"},"WinPython")]),s("dd",null,[s("p",null,"特定于Windows的发行版，包含用于构建包的预构建科学包和工具。")])]),s("p",null,"请注意，这些软件包可能不包含最新版本的Python或其他库，并且不由核心Python团队维护或支持。")]),s("section",{id:"configuring-python"},[s("h2",null,[s("span",{class:"section-number"},"4.6. "),l("配置Python"),s("a",{class:"headerlink",href:"#configuring-python",title:"Link to this heading"},"¶")]),s("p",null,[l("要从命令提示符方便地运行Python，您可以考虑在Windows中更改一些默认环境变量。虽然安装程序提供了为您配置PATH和PATHEXT变量的选项，但这仅适用于单版本、全局安装。如果您经常使用多个版本的Python，请考虑使用 "),s("a",{class:"reference internal",href:"#launcher"},[s("span",{class:"std std-ref"},"适用于Windows的Python启动器")]),l(" 。")]),s("section",{id:"excursus-setting-environment-variables"},[s("span",{id:"setting-envvars"}),s("h3",null,[s("span",{class:"section-number"},"4.6.1. "),l("附录：设置环境变量"),s("a",{class:"headerlink",href:"#excursus-setting-environment-variables",title:"Link to this heading"},"¶")]),s("p",null,"Windows允许在用户级别和系统级别永久配置环境变量，或临时在命令提示符中配置环境变量。"),s("p",null,[l("要临时设置环境变量，请打开命令提示符并使用 "),s("strong",{class:"command"},"set"),l(" 命令：")]),s("div",{class:"highlight-doscon notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"gp"},"C:\\>"),s("span",{class:"k"},"set"),l(),s("span",{class:"nv"},"PATH"),s("span",{class:"p"},"="),l("C:\\Program Files\\Python 3.9;"),s("span",{class:"nv"},"%PATH%"),l(`
        `),s("span",{class:"gp"},"C:\\>"),s("span",{class:"k"},"set"),l(),s("span",{class:"nv"},"PYTHONPATH"),s("span",{class:"p"},"="),s("span",{class:"nv"},"%PYTHONPATH%"),l(`;C:\\My_python_lib
        `),s("span",{class:"gp"},"C:\\>"),l(`python
        `)])])]),s("p",null,"这些环境变量的更改将应用​​于在该控制台中执行的任何其他命令，并且，由该控制台启动的任何应用程序都继承设这些设置。"),s("p",null,[l("在百分号中包含的变量名将被现有值替换，允许在开始或结束时添加新值。通过将包含 "),s("strong",{class:"program"},"python.exe"),l(" 的目录添加到开头来修改 "),s("span",{class:"target",id:"index-87"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 是确保启动正确版本的Python的常用方法。")]),s("p",null,[l("要永久修改默认环境变量，请单击“开始”并搜索“编辑环境变量”，或打开系统属性的 "),s("span",{class:"guilabel"},"高级系统设置"),l(" ，然后单击 "),s("span",{class:"guilabel"},"环境变量"),l(" 按钮。在此对话框中，您可以添加或修改用户和系统变量。要更改系统变量，您需要对计算机进行无限制访问（即管理员权限）。")]),s("div",{class:"admonition note"},[s("p",{class:"admonition-title"},"备注"),s("p",null,[l("Windows会将用户变量串联在系统变量 "),s("em",null,"之后"),l(" ，这可能会在修改 "),s("span",{class:"target",id:"index-88"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 时导致意外结果。")]),s("p",null,[s("span",{class:"target",id:"index-89"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONPATH"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONPATH")])]),l(" 变量被 Python 的所有版本使用，因此除非它列出的路径只包含与所有已安装的 Python 版本兼容的代码，否则不要永久配置此变量。")])]),s("div",{class:"admonition seealso"},[s("p",{class:"admonition-title"},"参见"),s("dl",{class:"simple"},[s("dt",null,[s("a",{class:"reference external",href:"https://docs.microsoft.com/en-us/windows/win32/procthread/environment-variables"},"https://docs.microsoft.com/en-us/windows/win32/procthread/environment-variables")]),s("dd",null,[s("p",null,"Windows 中的环境变量概述")]),s("dt",null,[s("a",{class:"reference external",href:"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/set_1"},"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/set_1")]),s("dd",null,[s("p",null,[l("用于临时修改环境变量的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"set")]),l(" 命令")])]),s("dt",null,[s("a",{class:"reference external",href:"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/setx"},"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/setx")]),s("dd",null,[s("p",null,[l("用于永久修改环境变量的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"setx")]),l(" 命令")])])])])]),s("section",{id:"finding-the-python-executable"},[s("span",{id:"windows-path-mod"}),s("h3",null,[s("span",{class:"section-number"},"4.6.2. "),l("查找Python可执行文件"),s("a",{class:"headerlink",href:"#finding-the-python-executable",title:"Link to this heading"},"¶")]),s("div",{class:"versionchanged"},[s("p",null,[s("span",{class:"versionmodified changed"},"在 3.5 版本发生变更.")])]),s("p",null,"除了使用自动创建的Python解释器的开始菜单项之外，您可能还想在命令提示符下启动Python。安装程序有一个选项可以为您设置。"),s("p",null,[l("在安装程序的第一页上，可以选择标记为“将Python添加到环境变量”的选项，以使安装程序将安装位置添加到 "),s("span",{class:"target",id:"index-90"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 。还添加了 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"Scripts\\")]),l(" 文件夹的位置。这允许你输入 "),s("strong",{class:"command"},"python"),l(" 来运行解释器，并且 "),s("strong",{class:"command"},"pip"),l(" 用于包安装程序。因此，您还可以使用命令行选项执行脚本，请参阅 "),s("a",{class:"reference internal",href:"cmdline.html#using-on-cmdline"},[s("span",{class:"std std-ref"},"命令行")]),l(" 文档。")]),s("p",null,[l("如果在安装时未启用此选项，则始终可以重新运行安装程序，选择“修改”并启用它。或者，您可以使用 "),s("a",{class:"reference internal",href:"#setting-envvars"},[s("span",{class:"std std-ref"},"附录：设置环境变量")]),l(" 的方法手动修改 "),s("span",{class:"target",id:"index-91"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 。您需要将Python安装目录添加到 "),s("span",{class:"target",id:"index-92"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 环境变量中，该内容与其他条目用分号分隔。示例变量可能如下所示（假设前两个条目已经存在）:")]),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\Program Files\\Python 3.9
        `)])])])])]),s("section",{id:"utf-8-mode"},[s("span",{id:"win-utf8-mode"}),s("h2",null,[s("span",{class:"section-number"},"4.7. "),l("UTF-8 模式"),s("a",{class:"headerlink",href:"#utf-8-mode",title:"Link to this heading"},"¶")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.7.")])]),s("p",null,[l("Windows 仍然使用传统编码格式作为系统的编码格式 (ANSI 代码页)。 Python 使用它作为文本文件默认的编码格式 (即 "),s("a",{class:"reference internal",href:"../library/locale.html#locale.getencoding",title:"locale.getencoding"},[s("code",{class:"xref py py-func docutils literal notranslate"},[s("span",{class:"pre"},"locale.getencoding()")])]),l(")。")]),s("p",null,"这可能会造成问题，因为因特网和大多数 Unix 系统包括 WSL (Windows Subsystem for Linux) 广泛使用 UTF-8。"),s("p",null,[l("你可以使用 "),s("a",{class:"reference internal",href:"../library/os.html#utf8-mode"},[s("span",{class:"std std-ref"},"Python UTF-8 模式")]),l(" 将默认的文本编码格式改为 UTF-8。 要启用 "),s("a",{class:"reference internal",href:"../library/os.html#utf8-mode"},[s("span",{class:"std std-ref"},"Python UTF-8 模式")]),l(" 可以通过 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-X"),l(),s("span",{class:"pre"},"utf8")]),l(" 命令行选项，或者 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONUTF8=1")]),l(" 环境变量。 请参阅 "),s("span",{class:"target",id:"index-93"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONUTF8"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONUTF8")])]),l(" 了解如何启用 UTF-8 模式，并参阅 "),s("a",{class:"reference internal",href:"#setting-envvars"},[s("span",{class:"std std-ref"},"附录：设置环境变量")]),l(" 了解如何修改环境变量。")]),s("p",null,[l("当 "),s("a",{class:"reference internal",href:"../library/os.html#utf8-mode"},[s("span",{class:"std std-ref"},"Python UTF-8 模式")]),l(' 启用时，你仍然可以通过 "mbcs" 编解码器使用系统编码格式（ANSI 代码页）。')]),s("p",null,[l("请注意添加 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONUTF8=1")]),l(" 到默认环境变量将会影响你的系统中的所有 Python 3.7+ 应用。 如果你有任何 Python 3.7+ 应用仍然依赖于传统的系统编码格式，则推荐设置临时环境变量或使用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-X"),l(),s("span",{class:"pre"},"utf8")]),l(" 命令行选项。")]),s("div",{class:"admonition note"},[s("p",{class:"admonition-title"},"备注"),s("p",null,"即使在不启用 UTF-8 模式时，Windows 版的 Python 也会在以下情况中默认使用 UTF-8："),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("控制台 I/O 包括标准 I/O (详情见 "),s("span",{class:"target",id:"index-94"}),s("a",{class:"pep reference external",href:"https://peps.python.org/pep-0528/"},[s("strong",null,"PEP 528")]),l(")。")])]),s("li",null,[s("p",null,[s("a",{class:"reference internal",href:"../glossary.html#term-filesystem-encoding-and-error-handler"},[s("span",{class:"xref std std-term"},"文件系统编码格式")]),l(" (参见 "),s("span",{class:"target",id:"index-95"}),s("a",{class:"pep reference external",href:"https://peps.python.org/pep-0529/"},[s("strong",null,"PEP 529")]),l(" 了解详情)。")])])])])]),s("section",{id:"python-launcher-for-windows"},[s("span",{id:"launcher"}),s("h2",null,[s("span",{class:"section-number"},"4.8. "),l("适用于Windows的Python启动器"),s("a",{class:"headerlink",href:"#python-launcher-for-windows",title:"Link to this heading"},"¶")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.3.")])]),s("p",null,"用于Windows的Python启动器是一个实用程序，可帮助定位和执行不同的Python版本。它允许脚本（或命令行）指示特定Python版本的首选项，并将定位并执行该版本。"),s("p",null,[l("与 "),s("span",{class:"target",id:"index-96"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 变量不同，启动器将正确选择最合适的Python版本。它更倾向于按用户安装而不是系统安装，并按语言版本排序，而不是使用最新安装的版本。")]),s("p",null,[l("启动器最初是在 "),s("span",{class:"target",id:"index-97"}),s("a",{class:"pep reference external",href:"https://peps.python.org/pep-0397/"},[s("strong",null,"PEP 397")]),l(" 中指定的。")]),s("section",{id:"getting-started"},[s("h3",null,[s("span",{class:"section-number"},"4.8.1. "),l("入门"),s("a",{class:"headerlink",href:"#getting-started",title:"Link to this heading"},"¶")]),s("section",{id:"from-the-command-line"},[s("h4",null,[s("span",{class:"section-number"},"4.8.1.1. "),l("从命令行"),s("a",{class:"headerlink",href:"#from-the-command-line",title:"Link to this heading"},"¶")]),s("div",{class:"versionchanged"},[s("p",null,[s("span",{class:"versionmodified changed"},"在 3.6 版本发生变更.")])]),s("p",null,[l("全局安装Python 3.3及更高版本将把启动器放在你的 "),s("span",{class:"target",id:"index-98"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 上。启动程序与所有可用的Python版本兼容，因此安装哪个版本无关紧要。要检查启动程序是否可用，请在命令提示符中执行以下命令：")]),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`py
        `)])])]),s("p",null,"您应该会发现已安装的最新版本的Python已启动 - 它可以正常退出，并且将指定的任何其他命令行参数直接发送到Python。"),s("p",null,"如果您安装了多个版本的Python（例如，3.7和 3.12 ），您会注意到Python 3.12 启动 - 如果要启动 Python 3.7，尝试命令："),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`py -3.7
        `)])])]),s("p",null,"如果您想使用已安装的 Python 2 的最新版本，请尝试以下命令："),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`py -2
        `)])])]),s("p",null,"如果您看到以下错误，则表明您没有安装启动器："),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`'py' is not recognized as an internal or external command,
        operable program or batch file.
        `)])])]),s("p",null,"Tix 命令："),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`py --list
        `)])])]),s("p",null,"显示当前已安装的Python版本。"),s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-x.y")]),l(" 参数是 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-V:Company/Tag")]),l(" 参数的简短形式，它允许选择一个特定的 Python 运行时，包括可能来自于 python.org 以外地方的版本。 任何遵循 "),s("span",{class:"target",id:"index-99"}),s("a",{class:"pep reference external",href:"https://peps.python.org/pep-0514/"},[s("strong",null,"PEP 514")]),l(" 进行注册的运行时都将是可被发现的。 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"--list")]),l(" 命令将列出所有使用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-V:")]),l(" 格式的可用运行时。")]),s("p",null,[l("当使用 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-V:")]),l(" 参数时，指定 Company 将把选择限制到来自该提供方的运行时，而仅指定 Tag 将选择来自所有提供方的运行时。 请注意省略斜杠将会视作是一个 Tag:")]),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`# Select any '3.*' tagged runtime
        py -V:3

        # Select any 'PythonCore' released runtime
        py -V:PythonCore/

        # Select PythonCore's latest Python 3 runtime
        py -V:PythonCore/3
        `)])])]),s("p",null,[l("该参数的简短形式 ("),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-3")]),l(") 将只选择来自核心 Python 发布版的运行时，而不选择其他分发版。 但是，完整形式 ("),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-V:3")]),l(") 则将选择来自任何版本的运行时。")]),s("p",null,[l("Company 是在完整字符串上以大小写不敏感的方式进行匹配。 Tag 则是在完整字符串或前缀上进行匹配，具体取决于下一个字符是点号还是横杠。 这将允许 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-V:3.1")]),l(" 匹配 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"3.1-32")]),l("，但不匹配 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"3.10")]),l("。 Tag 是按数字值进行排序 ("),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"3.10")]),l(" 比 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"3.1")]),l(" 新)，但是按文本进行比较 ("),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-V:3.01")]),l(" 将不匹配 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"3.1")]),l(")。")])]),s("section",{id:"virtual-environments"},[s("h4",null,[s("span",{class:"section-number"},"4.8.1.2. "),l("从虚拟环境"),s("a",{class:"headerlink",href:"#virtual-environments",title:"Link to this heading"},"¶")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.5.")])]),s("p",null,[l("如果启动程序运行时没有明确的Python版本，并且虚拟环境（使用标准库创建 "),s("a",{class:"reference internal",href:"../library/venv.html#module-venv",title:"venv: Creation of virtual environments."},[s("code",{class:"xref py py-mod docutils literal notranslate"},[s("span",{class:"pre"},"venv")])]),l(" 模块或外部 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"virtualenv")]),l(" 工具）处于活动状态，则启动程序将运行虚拟环境的解释器而不是全局的。要运行全局解释器，请停用虚拟环境，或显式指定全局Python版本。")])]),s("section",{id:"from-a-script"},[s("h4",null,[s("span",{class:"section-number"},"4.8.1.3. "),l("从脚本"),s("a",{class:"headerlink",href:"#from-a-script",title:"Link to this heading"},"¶")]),s("p",null,[l("让我们创建一个测试Python脚本 - 创建一个名为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"hello.py")]),l(" 的文件，其中包含以下内容")]),s("div",{class:"highlight-python notranslate"},[s("div",{class:"highlight",style:{position:"relative"}},[s("pre",null,[s("span"),s("span",{class:"ch"},"#! python"),l(`
        `),s("span",{class:"kn"},"import"),l(),s("span",{class:"nn"},"sys"),l(`
        `),s("span",{class:"n"},"sys"),s("span",{class:"o"},"."),s("span",{class:"n"},"stdout"),s("span",{class:"o"},"."),s("span",{class:"n"},"write"),s("span",{class:"p"},"("),s("span",{class:"s2"},'"hello from Python '),s("span",{class:"si"},"%s"),s("span",{class:"se"},"\\n"),s("span",{class:"s2"},'"'),l(),s("span",{class:"o"},"%"),l(),s("span",{class:"p"},"("),s("span",{class:"n"},"sys"),s("span",{class:"o"},"."),s("span",{class:"n"},"version"),s("span",{class:"p"},",))"),l(`
        `)])])]),s("p",null,"从hello.py所在的目录中，执行以下命令："),s("div",{class:"highlight-none notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),l(`py hello.py
        `)])])]),s("p",null,"您应该注意到最新的Python 2.x安装的版本号已打印出来。现在尝试将第一行更改为："),s("div",{class:"highlight-python notranslate"},[s("div",{class:"highlight",style:{position:"relative"}},[s("pre",null,[s("span"),s("span",{class:"ch"},"#! python3"),l(`
        `)])])]),s("p",null,[l("现在重新执行该命令将打印最新的 Python 3.x 信息。 如上面的命令行示例一样，你可以更明确地指定版本限定符。 假设你已安装了 Python 3.7，请尝试将第一行改为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"#!"),l(),s("span",{class:"pre"},"python3.7")]),l(" 那么你应当看到打印出了 3.7 的版本信息。")]),s("p",null,[l("请注意，与交互式使用不同，裸“python”将使用您已安装的Python 2.x的最新版本。这是为了向后兼容及兼容Unix，其中命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 通常是指Python 2。")])]),s("section",{id:"from-file-associations"},[s("h4",null,[s("span",{class:"section-number"},"4.8.1.4. "),l("从文件关联"),s("a",{class:"headerlink",href:"#from-file-associations",title:"Link to this heading"},"¶")]),s("p",null,[l("安装时应该将启动器与Python文件（即 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".py")]),l(", "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".pyw")]),l(", "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".pyc")]),l(" 文件）相关联。这意味着当您从Windows资源管理器中双击其中一个文件时，将使用启动程序，因此您可以使用上述相同的工具让脚本指定应使用的版本。")]),s("p",null,"这样做的主要好处是，单个启动程序可以同时支持多个Python版本，具体取决于第一行的内容。")])]),s("section",{id:"shebang-lines"},[s("h3",null,[s("span",{class:"section-number"},"4.8.2. "),l("Shebang 行"),s("a",{class:"headerlink",href:"#shebang-lines",title:"Link to this heading"},"¶")]),s("p",null,[l("如果脚本文件的第一行以 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"#!")]),l(' 开头，则称为 "shebang" 行。Linux和其他类Unix操作系统都有对这些行的本机支持，它们通常在此类系统上用来指示应该如何执行脚本。这个启动器允许在Windows上对Python脚本使用相同的工具，上面的示例演示了它们的使用。')]),s("p",null,"为了允许Python脚本中的shebang行在Unix和Windows之间移植，该启动器支持许多“虚拟”命令来指定要使用的解释器。支持的虚拟命令是："),s("ul",{class:"simple"},[s("li",null,[s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr/bin/env")])])]),s("li",null,[s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr/bin/python")])])]),s("li",null,[s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr/local/bin/python")])])]),s("li",null,[s("p",null,[s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")])])])]),s("p",null,"例如，如果脚本开始的第一行为"),s("div",{class:"highlight-sh notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"ch"},"#! /usr/bin/python"),l(`
        `)])])]),s("p",null,[l("The default Python will be located and used. As many Python scripts written to work on Unix will already have this line, you should find these scripts can be used by the launcher without modification. If you are writing a new script on Windows which you hope will be useful on Unix, you should use one of the shebang lines starting with "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr")]),l(".")]),s("p",null,[l('Any of the above virtual commands can be suffixed with an explicit version (either just the major version, or the major and minor version). Furthermore the 32-bit version can be requested by adding "-32" after the minor version. I.e. '),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr/bin/python3.7-32")]),l(" will request usage of the 32-bit python 3.7.")]),s("div",{class:"versionadded"},[s("p",null,[s("span",{class:"versionmodified added"},"Added in version 3.7: "),l('从 python 启动器 3.7 开始，可以通过 "-64" 后缀调用 64 位版本。 此外还可以指定一个主版本号加架构而不带次版本号 (即 '),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr/bin/python3-64")]),l(")。")])]),s("div",{class:"versionchanged"},[s("p",null,[s("span",{class:"versionmodified changed"},"在 3.11 版本发生变更: "),l("“-64”后缀已被弃用，现在会被视为“任何不被确定为 i386/32 位的架构”。 要请求一个特定的环境，请使用新的 "),s("code",{class:"samp docutils literal notranslate"},[s("span",{class:"pre"},"-V:"),s("em",null,[s("span",{class:"pre"},"TAG")])]),l(" 参数并附带完整的标签。")])]),s("p",null,[l("shebang 行的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"/usr/bin/env")]),l(" 形式具有一个额外的特别属性。 在查找已安装的 Python 解释器时，此形式将在可执行程序目录 "),s("span",{class:"target",id:"index-100"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 中搜索与作为第一个参数传入的名称相匹配的 Python 可执行程序。 这对应于 Unix 中 "),s("span",{class:"target",id:"index-101"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 执行搜索的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"env")]),l(" 程序的行为。 如果无法找到与 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"env")]),l(" 命令之后的第一个参数相匹配的可执行程序，但该参数是以 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 开头的，它将按针对其他虚拟命令的描述来处理。 可以设置环境变量 "),s("span",{class:"target",id:"index-102"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYLAUNCHER_NO_SEARCH_PATH")]),l(" (为任意值) 来跳过对 "),s("span",{class:"target",id:"index-103"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PATH")]),l(" 的搜索。")]),s("p",null,[l("无法匹配这些模式中任何一个的井号叹号行将在启动器的 "),s("a",{class:"reference internal",href:"#launcher-ini"},[s("span",{class:"std std-ref"},".INI 文件")]),l(" 的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"[commands]")]),l(" 一节中查找。 这可被用来以对你的系统来说有意义的方式处理某些命令。 命名的名称必须是一个单独的参数（在井号叹号行的可执行程序中不可有空格），而被替代的值则是该可执行程序的完整路径（在 .INI 中指定的附加参数将作为文件名的一部分被引用）。")]),s("div",{class:"highlight-ini notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"k"},"[commands]"),l(`
        `),s("span",{class:"na"},"/bin/xpython"),s("span",{class:"o"},"="),s("span",{class:"s"},"C:\\Program Files\\XPython\\python.exe"),l(`
        `)])])]),s("p",null,[l("任何未出现在 .INI 文件中的命令都会被当作 "),s("strong",null,"Windows"),l(" 可执行程序的绝对或相对于包含脚本文件的目录的路径。 这对于 Windows 专属的脚本来说很方便，例如由安装器所生成的脚本，因为此行为与 Unix 风格的 shell 是不兼容的。 这些路径可以加上引号，并可以包含多个参数，在它之后将会加上脚本路径以及任何附加参数。")])]),s("section",{id:"arguments-in-shebang-lines"},[s("h3",null,[s("span",{class:"section-number"},"4.8.3. "),l("shebang 行的参数"),s("a",{class:"headerlink",href:"#arguments-in-shebang-lines",title:"Link to this heading"},"¶")]),s("p",null,"shebang 行还可以指定要传递给Python解释器的其他选项。 举例来说，如果你有这样的 shebang 行："),s("div",{class:"highlight-sh notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"ch"},"#! /usr/bin/python -v"),l(`
        `)])])]),s("p",null,[l("那么 Python 将以 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"-v")]),l(" 选项启动")])]),s("section",{id:"customization"},[s("h3",null,[s("span",{class:"section-number"},"4.8.4. "),l("自定义"),s("a",{class:"headerlink",href:"#customization",title:"Link to this heading"},"¶")]),s("section",{id:"customization-via-ini-files"},[s("span",{id:"launcher-ini"}),s("h4",null,[s("span",{class:"section-number"},"4.8.4.1. "),l("通过INI文件自定义"),s("a",{class:"headerlink",href:"#customization-via-ini-files",title:"Link to this heading"},"¶")]),s("p",null,[l("启动器将搜索两个 .ini 文件 —— 当前用户应用程序数据目录中的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"py.ini")]),l(" ("),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"%LOCALAPPDATA%")]),l(" 或 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"$env:LocalAppData")]),l(") 以及启动器所在目录中的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"py.ini")]),l("。 同样的 .ini 文件还会被用于启动器的‘控制台’版本 (即 py.exe) 和‘窗口’版本 (即 pyw.exe)。")]),s("p",null,"“应用程序目录”中指定的自定义优先于可执行文件旁边.ini文件的自定义，因此对启动程序旁边的.ini文件不具有写访问权限的用户可以覆盖该全局.ini文件中的命令。")]),s("section",{id:"customizing-default-python-versions"},[s("h4",null,[s("span",{class:"section-number"},"4.8.4.2. "),l("自定义默认的Python版本"),s("a",{class:"headerlink",href:"#customizing-default-python-versions",title:"Link to this heading"},"¶")]),s("p",null,`在某些情况下，可以在命令中包含版本限定符，以指定命令将使用哪个Python版本。版本限定符以主版本号开头，可以选择后跟 ('.') 和次版本说明符。此外，可以通过添加 "-32" 或 “-64” 来指定是请求32位还是64位实现。`),s("p",null,[l("例如，一个shebang 行的 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"#!python")]),l(" 行没有版本限定符，而 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"#!python3")]),l(" 有一个版本限定符，它只指定一个主版本。")]),s("p",null,[l("如果在命令中找不到版本限定符，则可以设置环境变量 "),s("span",{class:"target",id:"index-104"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON")]),l(' 以指定默认版本限定符。 如果未设置，则默认为 "3"。 该变量可以指定能通过命令行传递的任何值，比如 "3", "3.7", "3.7-32" 或 "3.7-64"。 （请注意 "-64" 选项仅适用于 Python 3.7 或更高版本中包含的启动器。）')]),s("p",null,[l("如果没有找到次版本限定符，则可以设置环境变量 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON{major}")]),l(" （其中 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"{major}")]),l(" 是上面确定的当前主要版本限定符）以指定完整版本。如果没有找到这样的选项，启动器将枚举已安装的Python版本并使用为主要版本找到的最新次要版本，尽管不能保证，但该版本可能是该系列中最新安装的版本。")]),s("p",null,"在安装了相同（major.minor）Python版本的32位和64位的64位Windows上，64位版本将始终是首选。对于启动程序的32位和64位实现都是如此 -- 这对于启动程序32位和64位都是正确的 -- 如果可用，32位启动程序将倾向于执行指定版本的64位Python安装。这样就可以预测启动器的行为，只知道PC上安装了哪些版本，而不考虑它们的安装顺序（即，不知道32位或64位版本的Python和相应的启动器是否是最后安装）。如上所述，可以在版本说明符上使用可选的“-32”或“-64”后缀来更改此行为。"),s("p",null,"示例："),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("如果没有设置相关选项，命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python2")]),l(" 将使用安装的最新Python 2.x版本，命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3")]),l(" 将使用最新安装的Python 3.x.")])]),s("li",null,[s("p",null,[l("命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3.7")]),l(" 根本不会查阅任何选项，因为版本已完全指定。")])]),s("li",null,[s("p",null,[l("如果 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON=3")]),l(" ，命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3")]),l(" 都将使用最新安装的Python 3版本。")])]),s("li",null,[s("p",null,[l("如果 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON=3.7-32")]),l(" ，命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 将使用3.7的32位实现，而命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3")]),l(" 将使用最新安装的Python（PY_PYTHON根本没有被视为指定了主要版本。）")])]),s("li",null,[s("p",null,[l("如果 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON=3")]),l(" 且 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON3=3.7")]),l(" ，命令 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"python3")]),l(" 都将特别使用3.7")])])]),s("p",null,[l("除环境变量外，还可以在启动程序使用的.INI文件中配置相同的设置。 INI文件中的部分称为 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"[defaults]")]),l(" ，键名称将与没有前导 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_")]),l(" 前缀的环境变量相同（并注意INI文件中的键名不区分大小写） 。）环境变量的内容将覆盖INI文件中指定的内容。")]),s("p",null,"例如:"),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("设置 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON=3.7")]),l(" 等同于包含以下内容的INI文件：")])])]),s("div",{class:"highlight-ini notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"k"},"[defaults]"),l(`
        `),s("span",{class:"na"},"python"),s("span",{class:"o"},"="),s("span",{class:"s"},"3.7"),l(`
        `)])])]),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("设置 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON=3")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PY_PYTHON3=3.7")]),l(" 相当于包含以下内容的INI文件：")])])]),s("div",{class:"highlight-ini notranslate"},[s("div",{class:"highlight"},[s("pre",null,[s("span"),s("span",{class:"k"},"[defaults]"),l(`
        `),s("span",{class:"na"},"python"),s("span",{class:"o"},"="),s("span",{class:"s"},"3"),l(`
        `),s("span",{class:"na"},"python3"),s("span",{class:"o"},"="),s("span",{class:"s"},"3.7"),l(`
        `)])])])])]),s("section",{id:"diagnostics"},[s("h3",null,[s("span",{class:"section-number"},"4.8.5. "),l("诊断"),s("a",{class:"headerlink",href:"#diagnostics",title:"Link to this heading"},"¶")]),s("p",null,[l("如果环境变量 "),s("span",{class:"target",id:"index-105"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYLAUNCHER_DEBUG")]),l(" 已设置（为任何值），启动器将把诊断信息打印到 stderr（即控制台）。 此信息会尽量做到既详细 "),s("em",null,"又"),l(" 简洁，它应当允许你查看已被定位的 Python 的版本，特定版本为何被选择以及被用于执行目标 Python 的实际命令行。 它的主要目标是用于测试和调试。")])]),s("section",{id:"dry-run"},[s("h3",null,[s("span",{class:"section-number"},"4.8.6. "),l("试运行"),s("a",{class:"headerlink",href:"#dry-run",title:"Link to this heading"},"¶")]),s("p",null,[l("如果环境变量 "),s("span",{class:"target",id:"index-106"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYLAUNCHER_DRYRUN")]),l(" 已设置（为任意值），启动器将输出它将要运行的命令，但不会实际启动 Python。 这对于想要使用启动器执行检测然后再直接启动 Python 的工具来说很有用处。 请注意写入到标准输出的命令总是会使用 UTF-8 来编码，因而在控制台中可能无法正确渲染。")])]),s("section",{id:"install-on-demand"},[s("h3",null,[s("span",{class:"section-number"},"4.8.7. "),l("按需安装"),s("a",{class:"headerlink",href:"#install-on-demand",title:"Link to this heading"},"¶")]),s("p",null,[l("如果环境变量 "),s("span",{class:"target",id:"index-107"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYLAUNCHER_ALLOW_INSTALL")]),l(" 已经设置（为任何值），而所请求的 Python 版本没有安装但可以在 Microsoft Store 获得，启动器将尝试安装它。 这可能需要用户进行交互来完成，你可能需要再次运行此命令。")]),s("p",null,[l("额外的 "),s("span",{class:"target",id:"index-108"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYLAUNCHER_ALWAYS_INSTALL")]),l(" 变量将导致启动器总是尝试安装 Python，即使它已经被检测到。 这主要是出于测试目的（并且应当与 "),s("span",{class:"target",id:"index-109"}),s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYLAUNCHER_DRYRUN")]),l(" 一起使用）。")])]),s("section",{id:"return-codes"},[s("h3",null,[s("span",{class:"section-number"},"4.8.8. "),l("返回码"),s("a",{class:"headerlink",href:"#return-codes",title:"Link to this heading"},"¶")]),s("p",null,"Python 启动器可能返回以下的退出码。 不幸的是，没有任何办法可以将这些退出码与 Python 本身的退出码区分开来。"),s("p",null,"退出码的名称将在源代码中使用，并且仅供参考。 除了阅读本页面以外没有其他办法可以获取或解读它们。 这些条目是以名称的字母顺序列出的。"),s("div",{class:"responsive-table__container"},[s("table",{class:"docutils align-default"},[s("thead",null,[s("tr",{class:"row-odd"},[s("th",{class:"head"},[s("p",null,"名称")]),s("th",{class:"head"},[s("p",null,"值")]),s("th",{class:"head"},[s("p",null,"描述")])])]),s("tbody",null,[s("tr",{class:"row-even"},[s("td",null,[s("p",null,"RC_BAD_VENV_CFG")]),s("td",null,[s("p",null,"107")]),s("td",null,[s("p",null,[l("找到了 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"pyvenv.cfg")]),l(" 但文件已损坏。")])])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"RC_CREATE_PROCESS")]),s("td",null,[s("p",null,"101")]),s("td",null,[s("p",null,"启动 Python 失败。")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"RC_INSTALLING")]),s("td",null,[s("p",null,"111")]),s("td",null,[s("p",null,"安装已启动，但命令需要在其完成后重新运行。")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"RC_INTERNAL_ERROR")]),s("td",null,[s("p",null,"109")]),s("td",null,[s("p",null,"未预期的错误。 请报告程序错误。")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"RC_NO_COMMANDLINE")]),s("td",null,[s("p",null,"108")]),s("td",null,[s("p",null,"无法从操作系统获取命令行。")])]),s("tr",{class:"row-odd"},[s("td",null,[s("p",null,"RC_NO_PYTHON")]),s("td",null,[s("p",null,"103")]),s("td",null,[s("p",null,"无法定位所请求的版本。")])]),s("tr",{class:"row-even"},[s("td",null,[s("p",null,"RC_NO_VENV_CFG")]),s("td",null,[s("p",null,"106")]),s("td",null,[s("p",null,[l("需要 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"pyvenv.cfg")]),l(" 但没有找到。")])])])])])])])]),s("section",{id:"finding-modules"},[s("span",{id:"windows-finding-modules"}),s("h2",null,[s("span",{class:"section-number"},"4.9. "),l("查找模块"),s("a",{class:"headerlink",href:"#finding-modules",title:"Link to this heading"},"¶")]),s("p",null,[l("这些注释以详细的 Windows 注释对 "),s("a",{class:"reference internal",href:"../library/sys_path_init.html#sys-path-init"},[s("span",{class:"std std-ref"},"sys.path 模块搜索路径的初始化")]),l(" 中的描述进行了补充。")]),s("p",null,[l("当找不到 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"._pth")]),l(" 文件时， "),s("a",{class:"reference internal",href:"../library/sys.html#sys.path",title:"sys.path"},[s("code",{class:"xref py py-data docutils literal notranslate"},[s("span",{class:"pre"},"sys.path")])]),l(" 是如何在Windows上填充的：")]),s("ul",{class:"simple"},[s("li",null,[s("p",null,"在开始时，添加一个空条目，该条目对应于当前目录。")]),s("li",null,[s("p",null,[l("如果环境变量 "),s("span",{class:"target",id:"index-110"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONPATH"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONPATH")])]),l(" 存在，如 "),s("a",{class:"reference internal",href:"cmdline.html#using-on-envvars"},[s("span",{class:"std std-ref"},"环境变量")]),l(" 中所述，则接下来添加其条目。请注意，在Windows上，此变量中的路径必须用分号分隔，以区别于驱动器标识符中使用的冒号（ "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"C:\\")]),l(" 等）。")])]),s("li",null,[s("p",null,[l('额外的 "应用程序路径" 可以作为子键被同时添加到注册表 '),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"HKEY_CURRENT_USER")]),l(" 和 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"HKEY_LOCAL_MACHINE")]),l(" 分支下的 "),s("code",{class:"samp docutils literal notranslate"},[s("span",{class:"pre"},"\\SOFTWARE\\Python\\PythonCore{version}\\PythonPath")]),l(" 中。 以分号分隔的路径字符串作为默认值的子键将导致每个路径都被添加到 "),s("a",{class:"reference internal",href:"../library/sys.html#sys.path",title:"sys.path"},[s("code",{class:"xref py py-data docutils literal notranslate"},[s("span",{class:"pre"},"sys.path")])]),l(" 中。 （请注意所有已知的安装程序都只使用 HKLM，因此 HKCU 通常为空。）")])]),s("li",null,[s("p",null,[l("如果设置了环境变量 "),s("span",{class:"target",id:"index-111"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONHOME"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONHOME")])]),l(" ，则将其假定为 “Python 主目录” 。否则，主Python可执行文件的路径用于定位 “landmark 文件” （ "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"Lib\\os.py")]),l(" 或 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pythonXY.zip")]),l(" ）以推断 ”Python 主目录“ 。如果找到了Python主目录，则基于该文件夹将相关的子目录添加到 "),s("a",{class:"reference internal",href:"../library/sys.html#sys.path",title:"sys.path"},[s("code",{class:"xref py py-data docutils literal notranslate"},[s("span",{class:"pre"},"sys.path")])]),l(" （"),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"Lib")]),l(" , "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"plat-win")]),l(" 等）。否则，核心Python路径是从存储在注册表中的PythonPath构造的。")])]),s("li",null,[s("p",null,[l("如果找不到Python Home，也没有指定 "),s("span",{class:"target",id:"index-112"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONPATH"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONPATH")])]),l(" 环境变量，并且找不到注册表项，则使用具有相对条目的默认路径（例如 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},".\\Lib;"),l(),s("span",{class:"pre"},".\\plat-win")]),l(" 等等）。")])])]),s("p",null,[l("如果在主可执行文件旁边或在可执行文件上一级的目录中找到 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pyvenv.cfg")]),l(" 文件，则以下变体适用：")]),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("如果 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"home")]),l(" 是一个绝对路径，并且 "),s("span",{class:"target",id:"index-113"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONHOME"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONHOME")])]),l(" 未设置，则在推断起始位置时使用此路径而不是主可执行文件的路径。")])])]),s("p",null,"这一切的最终结果是："),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("运行 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" ，或主Python目录中的任何其他.exe（安装版本，或直接来自PCbuild目录）时，推导出核心路径，并忽略注册表中的核心路径。始终读取注册表中的其他“应用程序路径”。")])]),s("li",null,[s("p",null,"当Python托管在另一个.exe（不同的目录，通过COM嵌入等）时，将不会推断出“Python Home”，因此使用了来自注册表的核心路径。始终读取注册表中的其他“应用程序路径”。")]),s("li",null,[s("p",null,"如果Python找不到它的主目录并且没有注册表值（冻结的.exe，一些非常奇怪的安装设置），那么你会得到一条带有一些默认但相对的路径的路径。")])]),s("p",null,"对于那些想要将Python捆绑到其应用程序或发行版中的人，以下建议将防止与其他安装冲突："),s("ul",{class:"simple"},[s("li",null,[s("p",null,[l("在您的可执行文件中包含一个 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"._pth")]),l(" 文件，其中包含目录。这将忽略注册表和环境变量中列出的路径，并忽略 "),s("a",{class:"reference internal",href:"../library/site.html#module-site",title:"site: Module responsible for site-specific configuration."},[s("code",{class:"xref py py-mod docutils literal notranslate"},[s("span",{class:"pre"},"site")])]),l(" ，除非列出 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"import"),l(),s("span",{class:"pre"},"site")]),l(" 。")])]),s("li",null,[s("p",null,[l("If you are loading "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python3.dll")]),l(" or "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python37.dll")]),l(" in your own executable, explicitly call "),s("a",{class:"reference internal",href:"../c-api/init.html#c.Py_SetPath",title:"Py_SetPath"},[s("code",{class:"xref c c-func docutils literal notranslate"},[s("span",{class:"pre"},"Py_SetPath()")])]),l(" or (at least) "),s("a",{class:"reference internal",href:"../c-api/init.html#c.Py_SetProgramName",title:"Py_SetProgramName"},[s("code",{class:"xref c c-func docutils literal notranslate"},[s("span",{class:"pre"},"Py_SetProgramName()")])]),l(" before "),s("a",{class:"reference internal",href:"../c-api/init.html#c.Py_Initialize",title:"Py_Initialize"},[s("code",{class:"xref c c-func docutils literal notranslate"},[s("span",{class:"pre"},"Py_Initialize()")])]),l(".")])]),s("li",null,[s("p",null,[l("清除 和/或 覆盖 "),s("span",{class:"target",id:"index-114"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONPATH"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONPATH")])]),l(" 并在启动来自应用程序的 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 之前设置 "),s("span",{class:"target",id:"index-115"}),s("a",{class:"reference internal",href:"cmdline.html#envvar-PYTHONHOME"},[s("code",{class:"xref std std-envvar docutils literal notranslate"},[s("span",{class:"pre"},"PYTHONHOME")])]),l(" 。")])]),s("li",null,[s("p",null,[l("如果您不能使用前面的建议（例如，您是一个允许人们直接运行 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python.exe")]),l(" 的分发版），请确保安装目录中存在 landmark 文件 ("),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"Lib\\os.py")]),l(")。 （请注意，在 ZIP 文件中不会检测到该文件，但会检测到正确命名的 ZIP 文件。）")])])]),s("p",null,"这些将确保系统范围安装中的文件不会优先于与应用程序捆绑在一起的标准库的副本。否则，用户可能会在使用您的应用程序时遇到问题请注意，第一个建议是最好的，因为其他建议可能仍然容易受到注册表和用户站点包中的非标准路径的影响。"),s("div",{class:"versionchanged"},[s("p",null,[s("span",{class:"versionmodified changed"},"在 3.6 版本发生变更: "),l("添加 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"._pth")]),l(" 文件支持并从 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"pyvenv.cfg")]),l(" 中移除了 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"applocal")]),l(" 选项。")])]),s("div",{class:"versionchanged"},[s("p",null,[s("span",{class:"versionmodified changed"},"在 3.6 版本发生变更: "),l("当与可执行文件直接相邻时将添加 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"python"),s("em",null,[s("span",{class:"pre"},"XX")]),s("span",{class:"pre"},".zip")]),l(" 作为潜在的标志物。")])]),s("div",{class:"deprecated"},[s("p",null,[s("span",{class:"versionmodified deprecated"},"自 3.6 版本弃用: "),l("在 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"Modules")]),l(" (不是 "),s("code",{class:"docutils literal notranslate"},[s("span",{class:"pre"},"PythonPath")]),l(") 下的注册表中指定的模块可以通过 "),s("a",{class:"reference internal",href:"../library/importlib.html#importlib.machinery.WindowsRegistryFinder",title:"importlib.machinery.WindowsRegistryFinder"},[s("code",{class:"xref py py-class docutils literal notranslate"},[s("span",{class:"pre"},"importlib.machinery.WindowsRegistryFinder")])]),l(" 导入。 在 Windows 上此查找器在 3.6.0 及更早版本中被启用，但在将来可能需要显式地添加到 "),s("a",{class:"reference internal",href:"../library/sys.html#sys.meta_path",title:"sys.meta_path"},[s("code",{class:"xref py py-data docutils literal notranslate"},[s("span",{class:"pre"},"sys.meta_path")])]),l("。")])])]),s("section",{id:"additional-modules"},[s("h2",null,[s("span",{class:"section-number"},"4.10. "),l("附加模块"),s("a",{class:"headerlink",href:"#additional-modules",title:"Link to this heading"},"¶")]),s("p",null,"尽管Python的目标是在所有平台中都可移植，但是Windows有一些独特的特性。在标准库和外部都有一些模块和代码片段在使用这些特性。"),s("p",null,[l("特定于Windows的标准模块记录在 "),s("a",{class:"reference internal",href:"../library/windows.html#mswin-specific-services"},[s("span",{class:"std std-ref"},"Windows系统相关模块")]),l(" 中。")]),s("section",{id:"pywin32"},[s("h3",null,[s("span",{class:"section-number"},"4.10.1. "),l("PyWin32"),s("a",{class:"headerlink",href:"#pywin32",title:"Link to this heading"},"¶")]),s("p",null,[l("Mark Hammond 编写的 "),s("a",{class:"extlink-pypi reference external",href:"https://pypi.org/project/PyWin32/"},"PyWin32"),l(" 模块是一组用于高级 Windows 专属支持的模块。 这包括以下实用工具：")]),s("ul",{class:"simple"},[s("li",null,[s("p",null,[s("a",{class:"reference external",href:"https://docs.microsoft.com/en-us/windows/win32/com/component-object-model--com--portal"},"组件对象模型"),l(" (COM)")])]),s("li",null,[s("p",null,"Win32 API 调用")]),s("li",null,[s("p",null,"注册")]),s("li",null,[s("p",null,"事件日志")]),s("li",null,[s("p",null,[s("a",{class:"reference external",href:"https://docs.microsoft.com/en-us/cpp/mfc/mfc-desktop-applications"},"Microsoft Foundation Classes"),l(" (MFC) 用户界面")])])]),s("p",null,[s("a",{class:"reference external",href:"https://web.archive.org/web/20060524042422/https://www.python.org/windows/pythonwin/"},"PythonWin"),l(" 是PyWin32附带的一个示例MFC应用程序。它是一个内置调试器的可嵌入IDE。")]),s("div",{class:"admonition seealso"},[s("p",{class:"admonition-title"},"参见"),s("dl",{class:"simple"},[s("dt",null,[s("a",{class:"reference external",href:"http://timgolden.me.uk/python/win32_how_do_i.html"},"Win32 How Do I...?")]),s("dd",null,[s("p",null,"Tim Golden 著")]),s("dt",null,[s("a",{class:"reference external",href:"https://www.boddie.org.uk/python/COM.html"},"Python and COM")]),s("dd",null,[s("p",null,"David 和 Paul Boddie 著")])])])]),s("section",{id:"cx-freeze"},[s("h3",null,[s("span",{class:"section-number"},"4.10.2. "),l("cx_Freeze"),s("a",{class:"headerlink",href:"#cx-freeze",title:"Link to this heading"},"¶")]),s("p",null,[s("a",{class:"reference external",href:"https://cx-freeze.readthedocs.io/en/latest/"},"cx_Freeze"),l(" 将 Python 脚本包装成可执行的 Windows 程序 ("),s("code",{class:"file docutils literal notranslate"},[s("em",null,[s("span",{class:"pre"},"*")]),s("span",{class:"pre"},".exe")]),l(" 文件)。 当你完成此操作后，你就可以分发你的应用程序而无需用户安装 Python。")])])]),s("section",{id:"compiling-python-on-windows"},[s("h2",null,[s("span",{class:"section-number"},"4.11. "),l("在Windows上编译Python"),s("a",{class:"headerlink",href:"#compiling-python-on-windows",title:"Link to this heading"},"¶")]),s("p",null,[l("如果你想要自己编译 CPython，首先要做的是获取 "),s("a",{class:"reference external",href:"https://www.python.org/downloads/source/"},"源代码"),l("。 你可以下载最新发行版的源代码或是执行最新的 "),s("a",{class:"reference external",href:"https://devguide.python.org/setup/#get-the-source-code"},"签出"),l("。")]),s("p",null,[l("源代码树包含Microsoft Visual Studio的构建解决方案和项目文件，它是用于构建官方Python版本的编译器。这些文件位于 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"PCbuild")]),l(" 目录中。")]),s("p",null,[l("检查 "),s("code",{class:"file docutils literal notranslate"},[s("span",{class:"pre"},"PCbuild/readme.txt")]),l(" 以获取有关构建过程的一般信息。")]),s("p",null,[l("有关扩展模块，请参阅 "),s("a",{class:"reference internal",href:"../extending/windows.html#building-on-windows"},[s("span",{class:"std std-ref"},"在 Windows 上构建 C 和 C++ 扩展")]),l(" 。")])]),s("section",{id:"other-platforms"},[s("h2",null,[s("span",{class:"section-number"},"4.12. "),l("其他平台"),s("a",{class:"headerlink",href:"#other-platforms",title:"Link to this heading"},"¶")]),s("p",null,[l("随着Python的不断发展，不再支持以前曾经支持的一些平台（由于缺少用户或开发人员）。检查 "),s("span",{class:"target",id:"index-116"}),s("a",{class:"pep reference external",href:"https://peps.python.org/pep-0011/"},[s("strong",null,"PEP 11")]),l(" 了解所有不支持的平台的详细信息。")]),s("ul",{class:"simple"},[s("li",null,[s("p",null,[s("a",{class:"reference external",href:"https://pythonce.sourceforge.net/"},"Windows CE"),l(" 自 Python 3 起 "),s("a",{class:"reference external",href:"https://github.com/python/cpython/issues/71542"},"不再受支持"),l(" (如果曾经受支持的话)。")])]),s("li",null,[s("p",null,[l("Cygwin "),s("a",{class:"reference external",href:"https://cygwin.com/packages/summary/python3.html"},"<https://cygwin.com/>`_安装程序也提供了安装 `Python 解释器"),l(" 的功能。")])])]),s("p",null,[l("有关具有预编译安装程序平台的详细信息，请参阅 "),s("a",{class:"reference external",href:"https://www.python.org/downloads/windows/"},"Python for Windows")])])],-1));function x(e,r){const o=m;return c(),d(o,{class:"scrollbar"},{default:a(()=>[w]),_:1})}const b=i(P,[["render",x],["__scopeId","data-v-0bfb8018"]]),_={class:"container"},k={__name:"Python-install",setup(e){return(r,o)=>{const t=g,p=f;return c(),y("div",_,[n(p,{"tab-position":"left",style:{height:"100%"},class:"tabs"},{default:a(()=>[n(t,{label:"安装准备"},{default:a(()=>[l("安装准备")]),_:1}),n(t,{label:"Windows"},{default:a(()=>[n(b)]),_:1}),n(t,{label:"MacOS"},{default:a(()=>[l("MacOS")]),_:1}),n(t,{label:"其他平台"},{default:a(()=>[l("其他平台")]),_:1})]),_:1})])}}},C=i(k,[["__scopeId","data-v-46ce67aa"]]);export{C as default};
